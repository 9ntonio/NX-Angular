<div class="p-4">
    <h1 class="text-2xl font-bold mb-6">All Users</h1>

    <!-- Search and Filter Controls -->
    <div class="mb-6 flex gap-4">
        <mat-form-field>
            <mat-label>Search Users</mat-label>
            <input (ngModelChange)="onSearch($event)" [(ngModel)]="searchTerm" matInput placeholder="Search by name or email" />
        </mat-form-field>
        <button (click)="toggleFavorites()" color="primary" mat-raised-button>
            {{ showFavoritesOnly ? 'Show All' : 'Show Favorites' }}
        </button>
    </div>

    <!-- Users Grid -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
        @for (user of filteredUsers$ | async; track user.id) {
            <mat-card class="hover:shadow-lg transition-shadow">
                <mat-card-header>
                    <mat-card-title class="text-lg font-semibold">{{ user.name }}</mat-card-title>
                    <mat-card-subtitle>{{ user.username }}</mat-card-subtitle>
                </mat-card-header>
                <mat-card-content class="mt-4">
                    <div class="space-y-2">
                        <p><strong>Email:</strong> {{ user.email }}</p>
                        <p><strong>Company:</strong> {{ user.company.name }}</p>
                        <p><strong>Website:</strong> {{ user.website }}</p>
                    </div>
                </mat-card-content>
                <mat-card-actions class="flex justify-between items-center">
                    <button [routerLink]="['/users', user.id]" color="primary" mat-button>View Profile</button>
                    <button (click)="toggleFavorite(user.id)" color="warn" mat-icon-button>
                        <mat-icon>{{ user.isFavorite ? 'favorite' : 'favorite_border' }}</mat-icon>
                    </button>
                </mat-card-actions>
            </mat-card>
        } @empty {
            <div class="col-span-full text-center py-8">
                <p class="text-gray-500">No users found matching your criteria</p>
            </div>
        }
    </div>
</div>
